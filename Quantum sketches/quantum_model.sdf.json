{
  "info": {
    "title": "Quantum Ontology", 
    "version": "2021-07-27", 
    "copyright": "Copyright 2021, Passive Logic, Inc. All rights reserved.", 
    "license": "https://github.com/one-data-model/oneDM/blob/master/LICENSE"
  }, 
  "namespace": {
    "pl": "https://onedm.org/exploratory/passivelogic/"
  }, 
  "defaultNamespace": "pl", 

  "comment": "Whatabout: Name Properties for unnamed objects",

  "sdfObject": {

    "Equipment": {
      "items": {
        "sdfRef": "#/sdfObject/EquipmentComponent"
      }
    },

    "EquipmentComponent": {
      "sdfProperty": {
        "sdfRef": "#/sdfProperty/ActorType"
      },
      "sdfObject": {
        "Quanta": {
          "sdfRef": "#/sdfObject/Quanta"
        },
        "Connection": {
          "items": {
            "sdfRef": "#/sdfObject/Connection"
          },
          "minItems": 1
        },
        "Property": {
          "items": {
            "sdfRef": "#/sdfObject/Property"
          }
        },
        "Behavior": {
          "items": {
            "sdfRef": "#/sdfObject/Behavior"
          },
          "minItems": 1
        }
      },
      "sdfRequired": [
        "#/sdfObject/Equipment_Component/sdfProperty/ActorType",
        "#/sdfObject/Equipment_Component/sdfObject/Quanta",
        "#/sdfObject/Equipment_Component/sdfObject/Connection",
        "#/sdfObject/Equipment_Component/sdfObject/Behavior"
      ]   
    },

    "Quanta": {
      "sdfProperty": {
        "QuantaType": {
          "sdfRef": "#/sdfProperty/QuantaType"
        }
      },      
      "sdfObject": {
        "items": {
          "sdfRef": "#/sdfObject/Media"
        }
      }
    },

    "Connection": {
      "sdfProperty": {
        "Direction": {
          "sdfChoice": {
            "Input": {},
            "Output": {}
          }
        },
        "ConnectTo": {
          "sdfRef": "#/sdfObject/ObjectLink",
          "target": "#/sdfObject/EquipmentComponent"
        },
        "ConnectVia": {
          "sdfRef": "#/sdfObject/ObjectLink",
          "target": "#/sdfObject/EquipmentComponent"
        }
      }
    },

    "Behavior": {
      "comment": "This is comformance mapped from the Actor and Quanta types",
      "sdfProperty": {
        "BehaviorType": {
          "sdfChoice": {
            "BooleanLogic": { "comment": "What are the other behavior types?" },
            "ProtocolMap": { "description": "For Semantic Translation"}
          }
        },
        "Equation": {
          "sdfRef": "#/sdfObject/Equation"
        }
      }
    },

    "Media": {
      "sdfProperty": {
        "MediaType": {
          "sdfRef": "#/sdfProperty/MediaKind"
        }
      },      
      "sdfObject": {
        "MediaProperty": {
          "items": {
            "sdfRef": "#/sdfObject/MediaPropertyKind"
          }
        }
      }
    },

    "Property": {
      "comment": "Whatabout: ComputedProperty, AllowedRange, Statistics, TagSet",
      "sdfProperty": {
        "CurrentValue": {
          "type": "number"
        },
        "SourceQuality": {
          "type": "number"
        },
        "IsNullValue": {
          "type": "boolean"
        },
        "IsError": {
          "type": "boolean"
        },
        "IsComputedBy": {
          "sdfRef": "#/sdfObject/ObjectLink",
            "target": "#/sdfObject/Behavior"
        },
        "Unit": {
          "sdfRef": "#/sdfObject/Unit"
        }
      }
    },

    "Unit": {
      "comment": "Whatabout: UnitPreference by User",
      "sdfProperty": {
        "UnitCategory": {
          "sdfRef": "#/sdfProperty/UnitCategory"
        },
        "Representation": { 
          "type": "string" 
        },
        "EqTranslateToBaseUnit": { 
          "comment": "should these be a behavior equations?",
          "type": "string" 
        },
        "EqTranslateFromBaseUnit": { 
          "type": "string" 
        }
      }
    },

    "Equation": {
      "sdfProperty": {
        "Function": {
          "type": "string"
        },
        "Notes": {
          "type": "string"
        }
      }
    },

    "MediaPropertyKind": {
      "comment": "sdfChoice as a selector for setting properties of an object",
      "sdfChoice": {
        "SpecificEnthalpy": {
          "sdfRef": "#/sdfObject/Property",
          "sdfProperty": {
            "Unit": { "sdfRef": "#/sdfObject/UnitKind/sdfChoice/SI_Enthalpy_Unit" }
          }
        },
        "Pressure": {
          "sdfRef": "#/sdfObject/Property",
          "sdfProperty": {
            "Unit": { "sdfRef": "#/sdfObject/UnitKind/sdfChoice/SI_Pressure_Unit" }
          }
        },
        "FlowRate": {
          "sdfRef": "#/sdfObject/Property",
          "sdfProperty": {
            "Unit": { "sdfRef": "#/sdfObject/UnitKind/sdfChoice/SI_FlowRate_Unit" }
          }
        },
        "IPaddress": {
          "sdfRef": "#/sdfObject/Property",
          "sdfProperty": {
            "CurrentValueType": { "sdfRef": "#/sdfObject/Property/CurrentValueType/sdfChoice/StringType" }
          }
        }    
      }
    },

    "UnitKind": {
      "sdfChoice": {
        "SI_Enthalpy_Unit": {
          "sdfRef": "#/sdfObject/Unit",
          "UnitCategory": "#/sdfProperty/UnitCategory/sdfChoice/EnthalpyUnit",
          "Representation": "J*kg/degC"
        },
        "SI_Temperature_Unit": {
          "sdfRef": "#/sdfObject/Unit",
          "UnitCategory": "#/sdfProperty/UnitCategory/sdfChoice/TemperatureUnit",
          "Representation": "degC"
        }    
      }
    }
  },


  "sdfProperty": {
    "ObjectLink": {
      "type": "object",
      "properties": {
        "rel": { 
          "type": "string" 
        },
        "target": { 
          "type": "string",
          "pattern": "sdf-reference"
        }
      }
    },

    "ActorType": {
      "sdfChoice": {
        "Producer": {},
        "Consumer": {},
        "Transformer": {},
        "Transport": {},
        "Store": {},
        "Router": {},
        "Mixer": {},
        "Branch": {},
        "Path": {}
      }
    },

    "QuantaSuperClass": {
      "sdfChoice": {
        "Fluid": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "false" },
            "isMaterial": { "const": "true" },
            "isInformation": { "const": "false" }
          }
        },
        "Thermal": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "true" },
            "isMaterial": { "const": "false" },
            "isInformation": { "const": "false" }
          }
        },
        "Mechanical": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "true" },
            "isMaterial": { "const": "false" },
            "isInformation": { "const": "false" }
          }
        },
        "Fuels": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "true" },
            "isMaterial": { "const": "true" },
            "isInformation": { "const": "false" }
          }
        },
        "Control": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "false" },
            "isMaterial": { "const": "false" },
            "isInformation": { "const": "true" }
          }
        },
        "Data": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": "false" },
            "isMaterial": { "const": "false" },
            "isInformation": { "const": "true" }
          }
        }
      }
    },

    "QuantaType": {
      "sdfChoice": {
        "Liquid": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fluid"
        },
        "Gas": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fluid"
        },
        "Multiphase": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fluid"
        },
        "Conduction": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Thermal"
        },
        "Convection": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Thermal" 
        },
        "Radiation": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Thermal" 
        },
        "Linear": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Mechanical" 
        },
        "Rotation": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Mechanical" 
        },
        "Conveyor": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Mechanical" 
        },
        "Vehicle": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Mechanical" 
        },
        "Electrical": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fuels" 
        },
        "Steam": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fuels" 
        },
        "Combustion": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fuels" 
        },
        "Solar": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fuels" 
        },
        "Nuclear": {
          "sdfRef": "/#sdfObject/Quanta/sdfProperty/QuantaSuperClass/sdfChoice/Fuels" 
        }
      }
    },

    "MediaKind": {
      "sdfChoice": {
        "Water": { 
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isMaterial": { "const": true }
          }
        },
        "Air": { 
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isMaterial": { "const": true }
          }
        },
        "R134a": { 
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isMaterial": { "const": true }
          }
        },
        "Ice": { 
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isMaterial": { "const": true }
          }
        },
        "NaturalGas": { 
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isEnergy": { "const": true },
            "isMaterial": { "const": true }
          }
        },
        "BacnetIP": {
          "sdfRef": "#/sdfData/QuantaSuperClassConformance",
          "properties": {
            "isInformation": { "const": true }
          }
        }
      }
    },
    
    "UnitCategory": {
      "comment": "Fixme: There should be a UnitCategoryKind",
      "sdfChoice": {
        "TemperatureUnit": {
          "type": "object",
          "properties": {
            "BaseUnit": {
              "sdfRef": "#/sdfObject/ObjectLink",
              "properties": {
                "target": "#/sdfObject/UnitKind/sdfChoice/SI_Temperature_Unit"
              }
            }
          }
        },
        "EnthalpyUnit": {
          "type": "object",
          "properties": {
            "BaseUnit": {
              "sdfRef": "#/sdfObject/ObjectLink",
              "properties": {
                "target": "#/sdfObject/UnitKind/sdfChoice/SI_Enthalpy_Unit"
              }
            }
          }
        }
      }
    }
  },
  "sdfData": {
    "QuantaSuperClassConformance": {
      "type": "object",
      "properties": {
        "isEnergy": { "type": "boolean" },
        "isMaterial": { "type": "boolean" },
        "isInformation": { "type": "boolean" }
      }        
    }
  }
}