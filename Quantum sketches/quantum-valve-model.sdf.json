{
  "info": {
    "title": "Library Model for an example proportional valve based on the Quantum Ontology", 
    "version": "2021-07-27", 
    "copyright": "Copyright 2021, Passive Logic, Inc. All rights reserved.", 
    "license": "https://github.com/one-data-model/oneDM/blob/master/LICENSE"
  }, 
  "namespace": {
    "pl": "https://onedm.org/exploratory/passivelogic/"
  }, 
  "defaultNamespace": "pl", 

  "comment": "strawman format for instances",
  
  "sdfObject": {
    "ExampleProportionalValve": {
      "sdfRef": "pl:/#/sdfObject/Equipment",

      "sdfObject": {
        "ValveControllerProportional": {
          "sdfRef": "pl:/#/sdfObject/EquipmentComponent",
          "sdfProperty": {
            "comment": "Setting an sdfChoice selection for a property value in an instance, pointing to one choice",
            "ActorType": {
              "sdfRef": "pl:/#/sdfProperty/ActorType/sdfChoice/Transformer"
            }
          },
          "sdfObject": {
            "Quanta": {
              "sdfRef": "pl:/#/sdfObject/Quanta",
              "sdfProperty": {
                "QuantaType": {
                  "sdfRef": "pl:/#/sdfProperty/QuantaType/sdfChoice/Control",
                  "comment": "defines a 0-100 internal state"
                }
              },
              "sdfObject": {
                "Media": {
                  "sdfRef": "pl:/#/sdfObject/Media",
                  "sdfProperty": {
                    "MediaKind": {
                      "sdfRef": "pl:/#/sdfProperty/MediaKind/sdfChoice/BacnetIP"
                    }
                  },
                  "sdfObject": {
                    "comment": "The value type of a MediaPropertyKind choice item is a Quantum Property",
                    "MediaProperty": [
                      {
                        "sdfRef": "pl:/#/sdfProperty/MediaPropertyKind/sdfChoice/IPaddress",
                        "sdfProperty": {
                        "CurrentValue": { "const": "192.168.1.100" }
                        }
                      },
                      {
                        "sdfRef": "pl:/#/sdfProperty/MediaPropertyKind/sdfChoice/BacnetDeviceID",
                        "sdfProperty": {
                          "CurrentValue": { "const": "24" }
                        }
                      },
                      {
                        "sdfRef": "pl:/#/sdfProperty/MediaPropertyKind/sdfChoice/BacnetDeviceObjectID",
                        "sdfProperty": {
                          "CurrentValue": { "const": "AO1" }
                        }
                      },
                      {
                        "sdfRef": "pl:/#/sdfProperty/MediaPropertyKind/sdfChoice/BacnetDevicePropertyID",
                        "sdfProperty": {
                          "CurrentValue": { "const": "PresentValue" }
                        }
                      }
                    ]
                  }
                }
              }
            },
            "Connection": [
              {
                "sdfRef": "pl:/#/sdfObject/Connection",
                "sdfProperty": {
                  "Direction": { 
                    "sdfRef": "pl:/#/sdfObject/Connection/sdfProperty/Direction/sdfChoice/Input" 
                  },
                  "ConnectTo": {
                    "sdfRef": "pl:/#/sdfObject/ObjectLink",
                    "target": "#/sdfObject/BACnetPort"
                  }
                }
              },
              {
                "sdfRef": "pl:/#/sdfObject/Connection",
                "sdfProperty": {
                  "Direction": { 
                    "sdfRef": "pl:/#/sdfObject/Connection/sdfProperty/Direction/sdfChoice/Output" 
                  },
                  "ConnectTo": {
                    "sdfRef": "pl:/#/sdfObject/ObjectLink",
                    "target": "#/sdfObject/ValveActuatorDC"
                  }
                }
              }
            ],  
            "Behavior": {
              "sdfRef": "pl:/#/sdfObject/Behavior",
              "sdfProperty": {
                "comment": "Conformance for Control Quanta + Transformer Actor",
                "BehaviorType": "pl:/#/sdfObject/Behavior/sdfProperty/BehaviorType/sdfChoice/ProtocolMap"
              }
            },
            "Property": []
          }
        },
        "ValveActuatorDC": {
          "sdfRef": "pl:/#/sdfObject/EquipmentComponent",
          "ActorType": {
            "sdfRef": "pl:/#/sdfProperty/ActorType/sdfChoice/Transport"
          },
          "Quanta": {
            "sdfRef": "pl:/#/sdfObject/Quanta",
            "sdfProperty": {
              "QuantaType": {
                "sdfRef": "pl:/#/sdfProperty/QuantaType/sdfChoice/Mechanical"
              }
            }
          },
          "Connection": {              
            "sdfRef": "pl:/#/sdfObject/Connection"
          },
          "Behavior": {              
            "sdfRef": "pl:/#/sdfObject/Behavior"
          },
          "Property": {}
        },
        "ValveBodyEqualPercent": {
          "sdfRef": "pl:/#/sdfObject/EquipmentComponent",
          "ActorType": {
            "sdfRef": "pl:/#/sdfProperty/ActorType/sdfChoice/Router"
          },
          "Quanta": {
            "comment": "A valve body model may accommodate a range of Quanta and Media Types",
            "sdfRef": "pl:/#/sdfObject/Quanta",
            "sdfProperty": {
              "QuantaType": {
                "sdfRef": "pl:/#/sdfProperty/QuantaType/sdfChoice/Liquid"
              }
            }
          },
          "Connection": {              
            "sdfRef": "pl:/#/sdfObject/Connection"
          },
          "Behavior": {              
            "sdfRef": "pl:/#/sdfObject/Behavior"
          },
          "Property": {}
        }
      }
    }  
  }
}